"""
DietaryApp Telegram Bot - README
================================
Production-Ready Telegram Bot for Railway Deployment

–≠—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è –¥–∏–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è
—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–∏–∞–±–µ—Ç–∞, –ø–æ–¥–∞–≥—Ä—ã –∏ —Ü–µ–ª–∏–∞–∫–∏–∏.

Author: DietaryApp Team
Version: 1.0.0
License: MIT
"""

# ============================================================================
# üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ / QUICK START
# ============================================================================

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ / Local Development

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/dietaryapp/telegram-bot.git
cd telegram-bot
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –°–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```bash
# –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º .env –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º:
# - TELEGRAM_BOT_TOKEN (–æ—Ç @botfather)
# - OPENAI_API_KEY (–æ—Ç OpenAI)
# - GOOGLE_MAPS_API_KEY (–æ—Ç Google Cloud)
# - DATABASE_URL (PostgreSQL —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
nano .env
```

### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ª–æ–∫–∞–ª—å–Ω–æ)
```bash
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏–º PostgreSQL
# –ù–∞ macOS:
brew install postgresql@15
brew services start postgresql@15

# –ù–∞ Ubuntu/Debian:
sudo apt-get install postgresql postgresql-contrib
sudo systemctl start postgresql

# –°–æ–∑–¥–∞—ë–º –ë–î –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
createuser dietary_user
createdb -O dietary_user dietaryapp_db
psql dietaryapp_db -c "ALTER USER dietary_user WITH PASSWORD 'password';"

# –û–±–Ω–æ–≤–ª—è–µ–º DATABASE_URL –≤ .env:
# DATABASE_URL=postgresql://dietary_user:password@localhost:5432/dietaryapp_db
```

### 5. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ
```bash
python main.py

# –í—ã–≤–æ–¥:
# üéØ DietaryApp v1.0.0 –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è | –û–∫—Ä—É–∂–µ–Ω–∏–µ: development
# ‚úÖ Telegram –±–æ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: 123456789...
# üóÑÔ∏è  –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL...
# ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
# ‚öôÔ∏è  –ù–∞—Å—Ç—Ä–æ–π–∫–∞ middleware (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)...
# üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥...
# üöÄ –ó–∞–ø—É—Å–∫ DietaryApp Telegram Bot –≤ —Ä–µ–∂–∏–º–µ POLLING...
```

---

# ============================================================================
# üöÇ –†–ê–ó–í–Å–†–¢–´–í–ê–ù–ò–ï –ù–ê RAILWAY / RAILWAY DEPLOYMENT
# ============================================================================

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- GitHub –∞–∫–∫–∞—É–Ω—Ç
- Railway –∞–∫–∫–∞—É–Ω—Ç (https://railway.app)
- Git —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ

## –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ GitHub
```bash
# –°–æ–∑–¥–∞—ë–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
# (–µ—Å–ª–∏ –µ–≥–æ –µ—â—ë –Ω–µ—Ç)

# –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∞–π–ª—ã
git add .
git commit -m "Initial commit: DietaryApp Telegram Bot"
git push origin main
```

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Railway

1. **–í—Ö–æ–¥ –Ω–∞ Railway.app**
   - –û—Ç–∫—Ä–æ–π—Ç–µ https://railway.app
   - –ù–∞–∂–º–∏—Ç–µ "Sign in with GitHub"
   - –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å

2. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**
   - –ù–∞–∂–º–∏—Ç–µ "New Project"
   - –í—ã–±–µ—Ä–∏—Ç–µ "Deploy from GitHub repo"
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `telegram-bot`

3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ PostgreSQL**
   - –í Dashboard –Ω–∞–∂–º–∏—Ç–µ "+ Add"
   - –í—ã–±–µ—Ä–∏—Ç–µ "Database" ‚Üí "PostgreSQL"
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç DATABASE_URL

## –®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Railway Dashboard (Telegram Bot Service ‚Üí Variables):

```
TELEGRAM_BOT_TOKEN=YOUR_TOKEN_HERE
OPENAI_API_KEY=sk-YOUR_KEY_HERE
GOOGLE_MAPS_API_KEY=YOUR_KEY_HERE
ENVIRONMENT=production
DEBUG=False
LOG_LEVEL=INFO
```

DATABASE_URL –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ Railway –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è PostgreSQL.

## –®–∞–≥ 4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Deployment

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ë–µ—Ä—ë—Ç –∫–æ–¥ –∏–∑ GitHub
2. –ß–∏—Ç–∞–µ—Ç `railway.json`
3. –°—Ç—Ä–æ–∏—Ç Docker –æ–±—Ä–∞–∑ —á–µ—Ä–µ–∑ `Dockerfile`
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (restart policy)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –í Railway Dashboard —Å–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
Logs ‚Üí Bot Service

# –ò–ª–∏ —á–µ—Ä–µ–∑ CLI:
railway logs

# –í—ã–≤–æ–¥:
# üéØ DietaryApp v1.0.0 –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è | –û–∫—Ä—É–∂–µ–Ω–∏–µ: production
# ‚úÖ Telegram –±–æ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: 123456789...
# ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
# üöÄ –ó–∞–ø—É—Å–∫ DietaryApp Telegram Bot –≤ —Ä–µ–∂–∏–º–µ POLLING...
```

---

# ============================================================================
# üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê / PROJECT ARCHITECTURE
# ============================================================================

```
telegram-bot/
‚îú‚îÄ‚îÄ main.py                 # üéØ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config.py              # ‚öôÔ∏è  –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Pydantic)
‚îú‚îÄ‚îÄ database.py            # üóÑÔ∏è  SQLAlchemy –º–æ–¥–µ–ª–∏ –ë–î
‚îú‚îÄ‚îÄ handlers.py            # üì® –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥/—Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ middleware.py          # üîÑ Middleware (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îú‚îÄ‚îÄ services/              # üõ†Ô∏è  –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ recipe_service.py  # üç≥ –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ gpt_service.py     # ü§ñ AI –¥–∏–µ—Ç–æ–ª–æ–≥ (OpenAI)
‚îÇ   ‚îî‚îÄ‚îÄ shop_service.py    # üè™ –ü–æ–∏—Å–∫ –º–∞–≥–∞–∑–∏–Ω–æ–≤ –∏ —Ü–µ–Ω
‚îú‚îÄ‚îÄ requirements.txt       # üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile            # üê≥ Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ railway.json          # üöÇ Railway –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .env.example          # üîê –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ logs/                 # üìù –õ–æ–≥–∏ (—Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **main.py** - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```python
- init_bot() ‚Üí –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –±–æ—Ç–∞
- initialize_components() ‚Üí –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î, middleware, handlers
- run_bot() ‚Üí –∑–∞–ø—É—Å–∫ infinite polling
```

### 2. **config.py** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Pydantic)
```python
- Settings –∫–ª–∞—Å—Å —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ .env —Ñ–∞–π–ª–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
```

### 3. **database.py** - ORM –º–æ–¥–µ–ª–∏ (SQLAlchemy)
```python
- User - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–∏–∞–≥–Ω–æ–∑—ã, —è–∑—ã–∫)
- UserDiary - –¥–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è
- RecipeCache - –∫—ç—à —Ä–µ—Ü–µ–ø—Ç–æ–≤
- Shop - –º–∞–≥–∞–∑–∏–Ω—ã –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è
```

### 4. **handlers.py** - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
```python
@handle_start() - /start –∫–æ–º–∞–Ω–¥–∞, –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
@handle_help() - /help —Å–ø—Ä–∞–≤–∫–∞
@handle_callback() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫
@handle_text() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (—Å FSM)
```

### 5. **services/** - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
```python
RecipeService - –ø–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∏–∞–≥–Ω–æ–∑–∞–º
GPTService - –∑–∞–ø—Ä–æ—Å—ã –∫ OpenAI GPT-4 (retry logic)
ShopService - –ø–æ–∏—Å–∫ –º–∞–≥–∞–∑–∏–Ω–æ–≤, —Ä–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è, —Ü–µ–Ω—ã
```

---

# ============================================================================
# üìö API –ò –§–£–ù–ö–¶–ò–û–ù–ê–õ / API AND FEATURES
# ============================================================================

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|---------|
| `/start` | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É |
| `/status` | –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ) |
| `/settings` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è |

## Inline –∫–Ω–æ–ø–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é

- üîç **–ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–∞** - –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –¥–∏–∞–≥–Ω–æ–∑–∞–º
- üìç **–ú–∞–≥–∞–∑–∏–Ω—ã —Ä—è–¥–æ–º** - –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤ –ø–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- üìî **–ú–æ–π –¥–Ω–µ–≤–Ω–∏–∫** - –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–Ω–µ–≤–Ω–∏–∫–∞ –ø–∏—Ç–∞–Ω–∏—è
- ü§ñ **–°–ø—Ä–æ—Å–∏—Ç—å –¥–∏–µ—Ç–æ–ª–æ–≥–∞** - AI-–¥–∏–µ—Ç–æ–ª–æ–≥ –Ω–∞ –±–∞–∑–µ GPT-4
- ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—Ñ–∏–ª—è

## API –°–µ—Ä–≤–∏—Å–æ–≤

### RecipeService
```python
search_recipes(query, has_diabetes, has_gout, has_celiac, limit=10)
get_recipe_details(recipe_id)
_filter_by_diagnosis(recipes, ...)
```

### GPTService
```python
ask_dietician(question, has_diabetes, has_gout, has_celiac)
generate_meal_plan(days, has_diabetes, ...)
```

### ShopService
```python
find_nearby_shops(latitude, longitude, radius_km=2.0)
get_prices_for_recipe(recipe_id, ingredients)
calculate_recipe_cost(recipe, latitude, longitude)
```

---

# ============================================================================
# üîê SECURITY & COMPLIANCE / –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
# ============================================================================

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ **PEP8 –∫–æ–¥** - –≤–µ—Å—å –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP8 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
- ‚úÖ **Type hints** - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è MyPy
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤–æ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö (loguru)
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - try-except –±–ª–æ–∫–∏ —Å retry logic
- ‚úÖ **HTTPS** - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTPS
- ‚úÖ **Environment variables** - –≤—Å–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ .env
- ‚úÖ **Database pooling** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (pool_size=10)
- ‚úÖ **API rate limiting** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞
- ‚úÖ **User state management** - FSM –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

## –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

- **GDPR** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞–∫—Ä—ã—Ç–æ–π –ë–î
- **HIPAA** - –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º
- **CCPA** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- **–†–§ –§–ó-152** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º—É –∑–∞–∫–æ–Ω—É –æ –¥–∞–Ω–Ω—ã—Ö

---

# ============================================================================
# üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –õ–û–ì–ò–†–û–í–ê–ù–ò–ï / MONITORING & LOGGING
# ============================================================================

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ –≤ **–¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö**:

1. **stdout** (console) - –¥–ª—è Railway Dashboard
```
<INFO> | bot:handle_start:123 - ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 12345 –≤—ã–∑–≤–∞–ª /start
```

2. **logs/bot.log** - –¥–ª—è –∞—Ä—Ö–∏–≤–∞
```
2024-01-15 14:23:45 | INFO     | main:init_bot:42 - ‚úÖ Telegram –±–æ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ Railway

- **Logs** - –≤–∫–ª–∞–¥–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **Metrics** - CPU, –ø–∞–º—è—Ç—å, —Å–µ—Ç–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **Deployments** - –∏—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–π –∏ –æ—Ç–∫–∞—Ç–æ–≤

## Health Checks

Railway –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
test -f /app/logs/bot.log || exit 1
```

–ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞ 3 —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥ - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.

---

# ============================================================================
# üö® –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú / TROUBLESHOOTING
# ============================================================================

### –û—à–∏–±–∫–∞ 1: "TELEGRAM_BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
```
–†–µ—à–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª (cp .env.example .env)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é TELEGRAM_BOT_TOKEN
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

### –û—à–∏–±–∫–∞ 2: "Connection to database failed"
```
–†–µ—à–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL –≤ .env
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
```

### –û—à–∏–±–∫–∞ 3: "OpenAI API error"
```
–†–µ—à–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ OPENAI_API_KEY
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –∞–∫–∫–∞—É–Ω—Ç–∞ –µ—Å—Ç—å –±–∞–ª–∞–Ω—Å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
```

### –û—à–∏–±–∫–∞ 4: "Bot doesn't respond"
```
–†–µ—à–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: railway logs
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω: railway ps
3. –†–µ—Å—Ç–∞—Ä—Ç–Ω–∏—Ç–µ —Å–µ—Ä–≤–∏—Å: railway restart
```

---

# ============================================================================
# üì¶ –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò –†–ê–ó–í–Å–†–¢–´–í–ê–ù–ò–ï / UPDATES & DEPLOYMENT
# ============================================================================

## –õ–æ–∫–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥
git pull origin main

# –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt --upgrade

# –†–µ—Å—Ç–∞—Ä—Ç–∏–º –±–æ—Ç–∞
python main.py
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ Railway

```bash
# –ó–∞–∫–æ–º–º–∏—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "Update: new features"
git push origin main

# Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –ó–∞–º–µ—Ç–∏—Ç push
# 2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç —Å–µ—Ä–≤–∏—Å
# –ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –≤ Dashboard ‚Üí Deployments
```

## –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏

```bash
# –ù–∞ Railway Dashboard:
1. Deployments
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ
3. –ù–∞–∂–º–∏—Ç–µ "Rollback"
```

---

# ============================================================================
# üí∞ –°–¢–û–ò–ú–û–°–¢–¨ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø / PRICING
# ============================================================================

### Railway.app
- **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω**: $5/–º–µ—Å—è—Ü, 500 —á–∞—Å–æ–≤
- **–î–ª—è –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞**: ~30 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü = **–ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ —Ä–∞–º–∫–∞—Ö –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞**

### OpenAI GPT-4
- **–í—Ö–æ–¥—è—â–∏–µ —Ç–æ–∫–µ–Ω—ã**: $0.00003 per token
- **–ò—Å—Ö–æ–¥—è—â–∏–µ —Ç–æ–∫–µ–Ω—ã**: $0.00006 per token
- **–°—Ä–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å**: 100 —Ç–æ–∫–µ–Ω–æ–≤ –≤—Ö–æ–¥–∞ + 200 –≤—ã—Ö–æ–¥–∞ = $0.015
- **–ë—é–¥–∂–µ—Ç**: $20/–º–µ—Å—è—Ü ‚âà 1300 –∑–∞–ø—Ä–æ—Å–æ–≤

### Google Maps API
- **–ü–æ–∏—Å–∫ –º–µ—Å—Ç**: $7.00 –∑–∞ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–µ**: $2.50 –∑–∞ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤

### PostgreSQL –Ω–∞ Railway
- **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** –≤ —Ä–∞–º–∫–∞—Ö $5/–º–µ—Å—è—Ü –±–∞–∑–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞

---

# ============================================================================
# ü§ù –ö–û–ù–¢–†–ò–ë–¨–Æ–¢–ò–ù–ì / CONTRIBUTING
# ============================================================================

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/new-feature`)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP8
4. –°–¥–µ–ª–∞–π—Ç–µ commit (`git commit -m 'Add new feature'`)
5. Push –≤ branch (`git push origin feature/new-feature`)
6. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## Code Style

–ò—Å–ø–æ–ª—å–∑—É–µ–º:
- **Black** –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **isort** –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏–º–ø–æ—Ä—Ç–æ–≤
- **mypy** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤

```bash
black .
isort .
mypy . --ignore-missing-imports
```

---

# ============================================================================
# üìÑ –õ–ò–¶–ï–ù–ó–ò–Ø / LICENSE
# ============================================================================

–ü—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ **MIT License** ‚Äî —Å–º. —Ñ–∞–π–ª [LICENSE](./LICENSE)

---

# ============================================================================
# üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –ü–û–î–î–ï–†–ñ–ö–ê / SUPPORT
# ============================================================================

- üìß **Email**: support@dietaryapp.com
- üí¨ **Telegram**: https://t.me/dietaryapp_ru
- üêõ **Issues**: https://github.com/dietaryapp/telegram-bot/issues
- üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://dietaryapp.com/docs

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: —è–Ω–≤–∞—Ä—å 2024  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Production-ready
